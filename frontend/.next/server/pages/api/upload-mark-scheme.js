"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload-mark-scheme";
exports.ids = ["pages/api/upload-mark-scheme"];
exports.modules = {

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-mark-scheme&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fupload-mark-scheme.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-mark-scheme&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fupload-mark-scheme.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_upload_mark_scheme_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/upload-mark-scheme.ts */ \"(api)/./src/pages/api/upload-mark-scheme.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_mark_scheme_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_mark_scheme_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload-mark-scheme\",\n        pathname: \"/api/upload-mark-scheme\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_upload_mark_scheme_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZC1tYXJrLXNjaGVtZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGdXBsb2FkLW1hcmstc2NoZW1lLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2tFO0FBQ2xFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaUVBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZW1hdGgtZnJvbnRlbmQvPzNjNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdXBsb2FkLW1hcmstc2NoZW1lLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkLW1hcmstc2NoZW1lXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkLW1hcmstc2NoZW1lXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-mark-scheme&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fupload-mark-scheme.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n// frontend/lib/db.ts\n\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createPool({\n    host: \"localhost\",\n    user: \"root\",\n    password: \"\",\n    database: \"EdexcelMath\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHFCQUFxQjtBQUNjO0FBRW5DLE1BQU1DLE9BQU9ELGdFQUFnQixDQUFDO0lBQzVCRyxNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLG9CQUFvQjtJQUNwQkMsaUJBQWlCO0lBQ2pCQyxZQUFZO0FBQ2Q7QUFFQSxpRUFBZVIsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VtYXRoLWZyb250ZW5kLy4vc3JjL2xpYi9kYi50cz85ZTRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGZyb250ZW5kL2xpYi9kYi50c1xuaW1wb3J0IG15c3FsIGZyb20gXCJteXNxbDIvcHJvbWlzZVwiO1xuXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XG4gIGhvc3Q6IFwibG9jYWxob3N0XCIsXG4gIHVzZXI6IFwicm9vdFwiLFxuICBwYXNzd29yZDogXCJcIixcbiAgZGF0YWJhc2U6IFwiRWRleGNlbE1hdGhcIixcbiAgd2FpdEZvckNvbm5lY3Rpb25zOiB0cnVlLFxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxuICBxdWV1ZUxpbWl0OiAwLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHBvb2w7Il0sIm5hbWVzIjpbIm15c3FsIiwicG9vbCIsImNyZWF0ZVBvb2wiLCJob3N0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJ3YWl0Rm9yQ29ubmVjdGlvbnMiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/upload-mark-scheme.ts":
/*!*********************************************!*\
  !*** ./src/pages/api/upload-mark-scheme.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(api)/./src/lib/db.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).end();\n    const { marks, exam_metadata } = req.body;\n    if (!marks || !Array.isArray(marks)) {\n        return res.status(400).json({\n            error: \"Invalid or missing marks[]\"\n        });\n    }\n    // 补充结构化字段\n    exam_metadata.board = \"Edexcel\";\n    exam_metadata.qualification = \"A Level\";\n    exam_metadata.subject = \"Mathematics\";\n    exam_metadata.paper_code = \"9MA0/01\"; // 修正 OCR 误识别的 \"QMA0O1 01\"\n    exam_metadata.paper_name = \"Pure Mathematics Paper 1\";\n    exam_metadata.exam_session = \"2018\";\n    try {\n        const paper_name = exam_metadata.paper_name;\n        const paper_code = exam_metadata.paper_code;\n        const exam_session = exam_metadata.exam_session;\n        // 新增严格校验\n        if (!paper_code || !paper_name) {\n            console.error(\"❌ Missing paper_code or paper_name\");\n            throw new Error(\"Missing paper_code or paper_name\");\n        }\n        // 精确匹配试卷，paper_code 和 paper_name 都必须精确匹配\n        const debugPaperSql = interpolateSQL(`SELECT id FROM exam_papers\n       WHERE paper_code = ? AND paper_name = ?\n       LIMIT 1`, [\n            paper_code,\n            paper_name\n        ]);\n        console.log(\"\\uD83E\\uDDE0 Full exam_paper SQL:\", debugPaperSql);\n        const [examRows] = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT id FROM exam_papers\n       WHERE paper_code = ? AND paper_name = ?\n       LIMIT 1`, [\n            paper_code,\n            paper_name\n        ]);\n        if (examRows.length === 0) throw new Error(\"Exam paper not found\");\n        const exam_paper_id = examRows[0].id;\n        console.log(\"✅ Matched exam paper:\", {\n            exam_paper_id,\n            paper_name,\n            paper_code\n        });\n        let count = 0;\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"START TRANSACTION\");\n        // 2. 遍历 marks，查找对应 question_bank.id 并插入\n        for (const mark of marks){\n            const { question_number, label, level, mark_code, mark_content, ao_code, explanation } = mark;\n            if (!question_number || !label || !mark_code) continue;\n            const parsedLabel = extractLabel(label, level);\n            console.log(\"\\uD83D\\uDD0D Matching question_bank with:\", {\n                exam_paper_id,\n                question_number,\n                label: parsedLabel.label,\n                parent_label: parsedLabel.parent_label,\n                level\n            });\n            const debugSql = interpolateSQL(`SELECT id FROM question_bank WHERE exam_paper_id = ? AND question_number = ? AND label = ? AND parent_label <=> ? AND level = ?`, [\n                exam_paper_id,\n                question_number,\n                parsedLabel.label,\n                parsedLabel.parent_label,\n                level\n            ]);\n            console.log(\"\\uD83E\\uDDE0 Full SQL:\", debugSql);\n            const qrows = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT id FROM question_bank\n         WHERE exam_paper_id = ? AND question_number = ? AND label = ? AND parent_label <=> ? AND level = ?\n         LIMIT 1`, [\n                exam_paper_id,\n                question_number,\n                parsedLabel.label,\n                parsedLabel.parent_label,\n                level\n            ]);\n            if (qrows.length === 0) {\n                console.warn(`❌ No match: Q${question_number} ${label} ${level}`);\n                continue;\n            }\n            const question_bank_id = qrows[0].id;\n            const mark_type = getMarkType(mark_code);\n            const [existsRows] = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT id FROM mark_scheme\n         WHERE exam_paper_id = ? AND question_bank_id = ? AND mark_code = ?`, [\n                exam_paper_id,\n                question_bank_id,\n                mark_code\n            ]);\n            if (existsRows.length > 0) {\n                console.warn(`⚠️ Skipping duplicate mark: qid=${question_bank_id}, mark_code=${mark_code}`);\n                continue;\n            }\n            const insertSql = interpolateSQL(`INSERT INTO mark_scheme (exam_paper_id, question_bank_id, question_number, label, parent_label, level, mark_code, mark_type, mark_content, ao_code, explanation, created_at)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW())`, [\n                exam_paper_id,\n                question_bank_id,\n                question_number,\n                parsedLabel.label,\n                parsedLabel.parent_label,\n                level,\n                mark_code,\n                mark_type,\n                mark_content,\n                ao_code,\n                explanation\n            ]);\n            console.log(\"\\uD83E\\uDDE0 Full INSERT SQL:\", insertSql);\n            await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`INSERT INTO mark_scheme (exam_paper_id, question_bank_id, question_number, label, parent_label, level, mark_code, mark_type, mark_content, ao_code, explanation, created_at)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW())`, [\n                exam_paper_id,\n                question_bank_id,\n                question_number,\n                parsedLabel.label,\n                parsedLabel.parent_label,\n                level,\n                mark_code,\n                mark_type,\n                mark_content,\n                ao_code,\n                explanation\n            ]);\n            count++;\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"COMMIT\");\n        res.status(200).json({\n            success: true,\n            inserted: count,\n            exam_paper_id\n        });\n    } catch (err) {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"ROLLBACK\");\n        console.error(\"Upload error:\", err);\n        res.status(500).json({\n            error: err.message\n        });\n    }\n}\nfunction getMarkType(code) {\n    if (code.startsWith(\"dM\")) return \"dM\";\n    if (code.startsWith(\"M\")) return \"M\";\n    if (code.startsWith(\"A\")) return \"A\";\n    if (code.startsWith(\"B\")) return \"B\";\n    return null;\n}\nfunction extractLabel(fullLabel, level) {\n    const matches = fullLabel.match(/\\([a-zA-Z0-9]+\\)/g) || [];\n    if (level === \"subsub\" && matches.length === 2) {\n        return {\n            label: matches[1],\n            parent_label: matches[0]\n        };\n    }\n    return {\n        label: matches[0],\n        parent_label: null\n    };\n}\nfunction interpolateSQL(query, params) {\n    let i = 0;\n    return query.replace(/\\?/g, ()=>{\n        const p = params[i++];\n        if (p === null) return \"NULL\";\n        if (typeof p === \"string\") return `'${p.replace(/'/g, \"''\")}'`;\n        return p;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3VwbG9hZC1tYXJrLXNjaGVtZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUMwQjtBQUVYLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO0lBRXJELE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxhQUFhLEVBQUUsR0FBR04sSUFBSU8sSUFBSTtJQUN6QyxJQUFJLENBQUNGLFNBQVMsQ0FBQ0csTUFBTUMsT0FBTyxDQUFDSixRQUFRO1FBQ25DLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLTyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE2QjtJQUNwRTtJQUVBLFVBQVU7SUFDVkwsY0FBY00sS0FBSyxHQUFHO0lBQ3RCTixjQUFjTyxhQUFhLEdBQUc7SUFDOUJQLGNBQWNRLE9BQU8sR0FBRztJQUN4QlIsY0FBY1MsVUFBVSxHQUFHLFdBQVcsMEJBQTBCO0lBQ2hFVCxjQUFjVSxVQUFVLEdBQUc7SUFDM0JWLGNBQWNXLFlBQVksR0FBRztJQUU3QixJQUFJO1FBQ0YsTUFBTUQsYUFBYVYsY0FBY1UsVUFBVTtRQUMzQyxNQUFNRCxhQUFhVCxjQUFjUyxVQUFVO1FBQzNDLE1BQU1FLGVBQWVYLGNBQWNXLFlBQVk7UUFFL0MsU0FBUztRQUNULElBQUksQ0FBQ0YsY0FBYyxDQUFDQyxZQUFZO1lBQzlCRSxRQUFRUCxLQUFLLENBQUM7WUFDZCxNQUFNLElBQUlRLE1BQU07UUFDbEI7UUFFQSx5Q0FBeUM7UUFDekMsTUFBTUMsZ0JBQWdCQyxlQUNwQixDQUFDOztjQUVPLENBQUMsRUFDVDtZQUFDTjtZQUFZQztTQUFXO1FBRTFCRSxRQUFRSSxHQUFHLENBQUMscUNBQTJCRjtRQUV2QyxNQUFNLENBQUNHLFNBQVMsR0FBVSxNQUFNekIscURBQVEsQ0FDdEMsQ0FBQzs7Y0FFTyxDQUFDLEVBQ1Q7WUFBQ2lCO1lBQVlDO1NB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RjtBQUVBLFNBQVNOLFlBQVlPLElBQVk7SUFDL0IsSUFBSUEsS0FBS0MsVUFBVSxDQUFDLE9BQU8sT0FBTztJQUNsQyxJQUFJRCxLQUFLQyxVQUFVLENBQUMsTUFBTSxPQUFPO0lBQ2pDLElBQUlELEtBQUtDLFVBQVUsQ0FBQyxNQUFNLE9BQU87SUFDakMsSUFBSUQsS0FBS0MsVUFBVSxDQUFDLE1BQU0sT0FBTztJQUNqQyxPQUFPO0FBQ1Q7QUFFQSxTQUFTZixhQUFhZ0IsU0FBaUIsRUFBRXRCLEtBQWE7SUFDcEQsTUFBTXVCLFVBQVVELFVBQVVFLEtBQUssQ0FBQyx3QkFBd0IsRUFBRTtJQUMxRCxJQUFJeEIsVUFBVSxZQUFZdUIsUUFBUTlCLE1BQU0sS0FBSyxHQUFHO1FBQzlDLE9BQU87WUFBRU0sT0FBT3dCLE9BQU8sQ0FBQyxFQUFFO1lBQUVoQixjQUFjZ0IsT0FBTyxDQUFDLEVBQUU7UUFBQztJQUN2RDtJQUNBLE9BQU87UUFBRXhCLE9BQU93QixPQUFPLENBQUMsRUFBRTtRQUFFaEIsY0FBYztJQUFLO0FBQ2pEO0FBRUEsU0FBU2xCLGVBQWVHLEtBQWEsRUFBRWlDLE1BQWE7SUFDbEQsSUFBSUMsSUFBSTtJQUNSLE9BQU9sQyxNQUFNbUMsT0FBTyxDQUFDLE9BQU87UUFDMUIsTUFBTUMsSUFBSUgsTUFBTSxDQUFDQyxJQUFJO1FBQ3JCLElBQUlFLE1BQU0sTUFBTSxPQUFPO1FBQ3ZCLElBQUksT0FBT0EsTUFBTSxVQUFVLE9BQU8sQ0FBQyxDQUFDLEVBQUVBLEVBQUVELE9BQU8sQ0FBQyxNQUFNLE1BQU0sQ0FBQyxDQUFDO1FBQzlELE9BQU9DO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2VtYXRoLWZyb250ZW5kLy4vc3JjL3BhZ2VzL2FwaS91cGxvYWQtbWFyay1zY2hlbWUudHM/OGZhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCBkYiBmcm9tIFwiQC9saWIvZGJcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XG5cbiAgY29uc3QgeyBtYXJrcywgZXhhbV9tZXRhZGF0YSB9ID0gcmVxLmJvZHk7XG4gIGlmICghbWFya3MgfHwgIUFycmF5LmlzQXJyYXkobWFya3MpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCBvciBtaXNzaW5nIG1hcmtzW11cIiB9KTtcbiAgfVxuXG4gIC8vIOihpeWFhee7k+aehOWMluWtl+autVxuICBleGFtX21ldGFkYXRhLmJvYXJkID0gXCJFZGV4Y2VsXCI7XG4gIGV4YW1fbWV0YWRhdGEucXVhbGlmaWNhdGlvbiA9IFwiQSBMZXZlbFwiO1xuICBleGFtX21ldGFkYXRhLnN1YmplY3QgPSBcIk1hdGhlbWF0aWNzXCI7XG4gIGV4YW1fbWV0YWRhdGEucGFwZXJfY29kZSA9IFwiOU1BMC8wMVwiOyAvLyDkv67mraMgT0NSIOivr+ivhuWIq+eahCBcIlFNQTBPMSAwMVwiXG4gIGV4YW1fbWV0YWRhdGEucGFwZXJfbmFtZSA9IFwiUHVyZSBNYXRoZW1hdGljcyBQYXBlciAxXCI7XG4gIGV4YW1fbWV0YWRhdGEuZXhhbV9zZXNzaW9uID0gXCIyMDE4XCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXBlcl9uYW1lID0gZXhhbV9tZXRhZGF0YS5wYXBlcl9uYW1lO1xuICAgIGNvbnN0IHBhcGVyX2NvZGUgPSBleGFtX21ldGFkYXRhLnBhcGVyX2NvZGU7XG4gICAgY29uc3QgZXhhbV9zZXNzaW9uID0gZXhhbV9tZXRhZGF0YS5leGFtX3Nlc3Npb247XG5cbiAgICAvLyDmlrDlop7kuKXmoLzmoKHpqoxcbiAgICBpZiAoIXBhcGVyX2NvZGUgfHwgIXBhcGVyX25hbWUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTWlzc2luZyBwYXBlcl9jb2RlIG9yIHBhcGVyX25hbWVcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHBhcGVyX2NvZGUgb3IgcGFwZXJfbmFtZVwiKTtcbiAgICB9XG5cbiAgICAvLyDnsr7noa7ljLnphY3or5XljbfvvIxwYXBlcl9jb2RlIOWSjCBwYXBlcl9uYW1lIOmDveW/hemhu+eyvuehruWMuemFjVxuICAgIGNvbnN0IGRlYnVnUGFwZXJTcWwgPSBpbnRlcnBvbGF0ZVNRTChcbiAgICAgIGBTRUxFQ1QgaWQgRlJPTSBleGFtX3BhcGVyc1xuICAgICAgIFdIRVJFIHBhcGVyX2NvZGUgPSA/IEFORCBwYXBlcl9uYW1lID0gP1xuICAgICAgIExJTUlUIDFgLFxuICAgICAgW3BhcGVyX2NvZGUsIHBhcGVyX25hbWVdXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhcIvCfp6AgRnVsbCBleGFtX3BhcGVyIFNRTDpcIiwgZGVidWdQYXBlclNxbCk7XG5cbiAgICBjb25zdCBbZXhhbVJvd3NdOiBhbnlbXSA9IGF3YWl0IGRiLnF1ZXJ5KFxuICAgICAgYFNFTEVDVCBpZCBGUk9NIGV4YW1fcGFwZXJzXG4gICAgICAgV0hFUkUgcGFwZXJfY29kZSA9ID8gQU5EIHBhcGVyX25hbWUgPSA/XG4gICAgICAgTElNSVQgMWAsXG4gICAgICBbcGFwZXJfY29kZSwgcGFwZXJfbmFtZV1cbiAgICApO1xuICAgIGlmIChleGFtUm93cy5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcihcIkV4YW0gcGFwZXIgbm90IGZvdW5kXCIpO1xuICAgIGNvbnN0IGV4YW1fcGFwZXJfaWQgPSBleGFtUm93c1swXS5pZDtcbiAgICBjb25zb2xlLmxvZyhcIuKchSBNYXRjaGVkIGV4YW0gcGFwZXI6XCIsIHsgZXhhbV9wYXBlcl9pZCwgcGFwZXJfbmFtZSwgcGFwZXJfY29kZSB9KTtcblxuICAgIGxldCBjb3VudCA9IDA7XG5cbiAgICBhd2FpdCBkYi5xdWVyeShcIlNUQVJUIFRSQU5TQUNUSU9OXCIpO1xuXG4gICAgLy8gMi4g6YGN5Y6GIG1hcmtz77yM5p+l5om+5a+55bqUIHF1ZXN0aW9uX2JhbmsuaWQg5bm25o+S5YWlXG4gICAgZm9yIChjb25zdCBtYXJrIG9mIG1hcmtzKSB7XG4gICAgICBjb25zdCB7IHF1ZXN0aW9uX251bWJlciwgbGFiZWwsIGxldmVsLCBtYXJrX2NvZGUsIG1hcmtfY29udGVudCwgYW9fY29kZSwgZXhwbGFuYXRpb24gfSA9IG1hcms7XG4gICAgICBpZiAoIXF1ZXN0aW9uX251bWJlciB8fCAhbGFiZWwgfHwgIW1hcmtfY29kZSkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHBhcnNlZExhYmVsID0gZXh0cmFjdExhYmVsKGxhYmVsLCBsZXZlbCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBNYXRjaGluZyBxdWVzdGlvbl9iYW5rIHdpdGg6XCIsIHsgZXhhbV9wYXBlcl9pZCwgcXVlc3Rpb25fbnVtYmVyLCBsYWJlbDogcGFyc2VkTGFiZWwubGFiZWwsIHBhcmVudF9sYWJlbDogcGFyc2VkTGFiZWwucGFyZW50X2xhYmVsLCBsZXZlbCB9KTtcblxuICAgICAgY29uc3QgZGVidWdTcWwgPSBpbnRlcnBvbGF0ZVNRTChcbiAgICAgICAgYFNFTEVDVCBpZCBGUk9NIHF1ZXN0aW9uX2JhbmsgV0hFUkUgZXhhbV9wYXBlcl9pZCA9ID8gQU5EIHF1ZXN0aW9uX251bWJlciA9ID8gQU5EIGxhYmVsID0gPyBBTkQgcGFyZW50X2xhYmVsIDw9PiA/IEFORCBsZXZlbCA9ID9gLFxuICAgICAgICBbZXhhbV9wYXBlcl9pZCwgcXVlc3Rpb25fbnVtYmVyLCBwYXJzZWRMYWJlbC5sYWJlbCwgcGFyc2VkTGFiZWwucGFyZW50X2xhYmVsLCBsZXZlbF1cbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfp6AgRnVsbCBTUUw6XCIsIGRlYnVnU3FsKTtcblxuICAgICAgY29uc3QgcXJvd3M6IGFueVtdID0gYXdhaXQgZGIucXVlcnkoXG4gICAgICAgIGBTRUxFQ1QgaWQgRlJPTSBxdWVzdGlvbl9iYW5rXG4gICAgICAgICBXSEVSRSBleGFtX3BhcGVyX2lkID0gPyBBTkQgcXVlc3Rpb25fbnVtYmVyID0gPyBBTkQgbGFiZWwgPSA/IEFORCBwYXJlbnRfbGFiZWwgPD0+ID8gQU5EIGxldmVsID0gP1xuICAgICAgICAgTElNSVQgMWAsXG4gICAgICAgIFtleGFtX3BhcGVyX2lkLCBxdWVzdGlvbl9udW1iZXIsIHBhcnNlZExhYmVsLmxhYmVsLCBwYXJzZWRMYWJlbC5wYXJlbnRfbGFiZWwsIGxldmVsXVxuICAgICAgKTtcbiAgICAgIGlmIChxcm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDinYwgTm8gbWF0Y2g6IFEke3F1ZXN0aW9uX251bWJlcn0gJHtsYWJlbH0gJHtsZXZlbH1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF1ZXN0aW9uX2JhbmtfaWQgPSBxcm93c1swXS5pZDtcbiAgICAgIGNvbnN0IG1hcmtfdHlwZSA9IGdldE1hcmtUeXBlKG1hcmtfY29kZSk7XG5cbiAgICAgIGNvbnN0IFtleGlzdHNSb3dzXTogYW55W10gPSBhd2FpdCBkYi5xdWVyeShcbiAgICAgICAgYFNFTEVDVCBpZCBGUk9NIG1hcmtfc2NoZW1lXG4gICAgICAgICBXSEVSRSBleGFtX3BhcGVyX2lkID0gPyBBTkQgcXVlc3Rpb25fYmFua19pZCA9ID8gQU5EIG1hcmtfY29kZSA9ID9gLFxuICAgICAgICBbZXhhbV9wYXBlcl9pZCwgcXVlc3Rpb25fYmFua19pZCwgbWFya19jb2RlXVxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdHNSb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gU2tpcHBpbmcgZHVwbGljYXRlIG1hcms6IHFpZD0ke3F1ZXN0aW9uX2JhbmtfaWR9LCBtYXJrX2NvZGU9JHttYXJrX2NvZGV9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbnNlcnRTcWwgPSBpbnRlcnBvbGF0ZVNRTChcbiAgICAgICAgYElOU0VSVCBJTlRPIG1hcmtfc2NoZW1lIChleGFtX3BhcGVyX2lkLCBxdWVzdGlvbl9iYW5rX2lkLCBxdWVzdGlvbl9udW1iZXIsIGxhYmVsLCBwYXJlbnRfbGFiZWwsIGxldmVsLCBtYXJrX2NvZGUsIG1hcmtfdHlwZSwgbWFya19jb250ZW50LCBhb19jb2RlLCBleHBsYW5hdGlvbiwgY3JlYXRlZF9hdClcbiAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgTk9XKCkpYCxcbiAgICAgICAgW1xuICAgICAgICAgIGV4YW1fcGFwZXJfaWQsXG4gICAgICAgICAgcXVlc3Rpb25fYmFua19pZCxcbiAgICAgICAgICBxdWVzdGlvbl9udW1iZXIsXG4gICAgICAgICAgcGFyc2VkTGFiZWwubGFiZWwsXG4gICAgICAgICAgcGFyc2VkTGFiZWwucGFyZW50X2xhYmVsLFxuICAgICAgICAgIGxldmVsLFxuICAgICAgICAgIG1hcmtfY29kZSxcbiAgICAgICAgICBtYXJrX3R5cGUsXG4gICAgICAgICAgbWFya19jb250ZW50LFxuICAgICAgICAgIGFvX2NvZGUsXG4gICAgICAgICAgZXhwbGFuYXRpb25cbiAgICAgICAgXVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+noCBGdWxsIElOU0VSVCBTUUw6XCIsIGluc2VydFNxbCk7XG5cbiAgICAgIGF3YWl0IGRiLnF1ZXJ5KFxuICAgICAgICBgSU5TRVJUIElOVE8gbWFya19zY2hlbWUgKGV4YW1fcGFwZXJfaWQsIHF1ZXN0aW9uX2JhbmtfaWQsIHF1ZXN0aW9uX251bWJlciwgbGFiZWwsIHBhcmVudF9sYWJlbCwgbGV2ZWwsIG1hcmtfY29kZSwgbWFya190eXBlLCBtYXJrX2NvbnRlbnQsIGFvX2NvZGUsIGV4cGxhbmF0aW9uLCBjcmVhdGVkX2F0KVxuICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCA/LCBOT1coKSlgLFxuICAgICAgICBbXG4gICAgICAgICAgZXhhbV9wYXBlcl9pZCxcbiAgICAgICAgICBxdWVzdGlvbl9iYW5rX2lkLFxuICAgICAgICAgIHF1ZXN0aW9uX251bWJlcixcbiAgICAgICAgICBwYXJzZWRMYWJlbC5sYWJlbCxcbiAgICAgICAgICBwYXJzZWRMYWJlbC5wYXJlbnRfbGFiZWwsXG4gICAgICAgICAgbGV2ZWwsXG4gICAgICAgICAgbWFya19jb2RlLFxuICAgICAgICAgIG1hcmtfdHlwZSxcbiAgICAgICAgICBtYXJrX2NvbnRlbnQsXG4gICAgICAgICAgYW9fY29kZSxcbiAgICAgICAgICBleHBsYW5hdGlvblxuICAgICAgICBdXG4gICAgICApO1xuXG4gICAgICBjb3VudCsrO1xuICAgIH1cblxuICAgIGF3YWl0IGRiLnF1ZXJ5KFwiQ09NTUlUXCIpO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBpbnNlcnRlZDogY291bnQsIGV4YW1fcGFwZXJfaWQgfSk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgYXdhaXQgZGIucXVlcnkoXCJST0xMQkFDS1wiKTtcbiAgICBjb25zb2xlLmVycm9yKFwiVXBsb2FkIGVycm9yOlwiLCBlcnIpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE1hcmtUeXBlKGNvZGU6IHN0cmluZykge1xuICBpZiAoY29kZS5zdGFydHNXaXRoKFwiZE1cIikpIHJldHVybiBcImRNXCI7XG4gIGlmIChjb2RlLnN0YXJ0c1dpdGgoXCJNXCIpKSByZXR1cm4gXCJNXCI7XG4gIGlmIChjb2RlLnN0YXJ0c1dpdGgoXCJBXCIpKSByZXR1cm4gXCJBXCI7XG4gIGlmIChjb2RlLnN0YXJ0c1dpdGgoXCJCXCIpKSByZXR1cm4gXCJCXCI7XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0TGFiZWwoZnVsbExhYmVsOiBzdHJpbmcsIGxldmVsOiBzdHJpbmcpIHtcbiAgY29uc3QgbWF0Y2hlcyA9IGZ1bGxMYWJlbC5tYXRjaCgvXFwoW2EtekEtWjAtOV0rXFwpL2cpIHx8IFtdO1xuICBpZiAobGV2ZWwgPT09IFwic3Vic3ViXCIgJiYgbWF0Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICByZXR1cm4geyBsYWJlbDogbWF0Y2hlc1sxXSwgcGFyZW50X2xhYmVsOiBtYXRjaGVzWzBdIH07XG4gIH1cbiAgcmV0dXJuIHsgbGFiZWw6IG1hdGNoZXNbMF0sIHBhcmVudF9sYWJlbDogbnVsbCB9O1xufVxuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVNRTChxdWVyeTogc3RyaW5nLCBwYXJhbXM6IGFueVtdKSB7XG4gIGxldCBpID0gMDtcbiAgcmV0dXJuIHF1ZXJ5LnJlcGxhY2UoL1xcPy9nLCAoKSA9PiB7XG4gICAgY29uc3QgcCA9IHBhcmFtc1tpKytdO1xuICAgIGlmIChwID09PSBudWxsKSByZXR1cm4gJ05VTEwnO1xuICAgIGlmICh0eXBlb2YgcCA9PT0gJ3N0cmluZycpIHJldHVybiBgJyR7cC5yZXBsYWNlKC8nL2csIFwiJydcIil9J2A7XG4gICAgcmV0dXJuIHA7XG4gIH0pO1xufSJdLCJuYW1lcyI6WyJkYiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJtYXJrcyIsImV4YW1fbWV0YWRhdGEiLCJib2R5IiwiQXJyYXkiLCJpc0FycmF5IiwianNvbiIsImVycm9yIiwiYm9hcmQiLCJxdWFsaWZpY2F0aW9uIiwic3ViamVjdCIsInBhcGVyX2NvZGUiLCJwYXBlcl9uYW1lIiwiZXhhbV9zZXNzaW9uIiwiY29uc29sZSIsIkVycm9yIiwiZGVidWdQYXBlclNxbCIsImludGVycG9sYXRlU1FMIiwibG9nIiwiZXhhbVJvd3MiLCJxdWVyeSIsImxlbmd0aCIsImV4YW1fcGFwZXJfaWQiLCJpZCIsImNvdW50IiwibWFyayIsInF1ZXN0aW9uX251bWJlciIsImxhYmVsIiwibGV2ZWwiLCJtYXJrX2NvZGUiLCJtYXJrX2NvbnRlbnQiLCJhb19jb2RlIiwiZXhwbGFuYXRpb24iLCJwYXJzZWRMYWJlbCIsImV4dHJhY3RMYWJlbCIsInBhcmVudF9sYWJlbCIsImRlYnVnU3FsIiwicXJvd3MiLCJ3YXJuIiwicXVlc3Rpb25fYmFua19pZCIsIm1hcmtfdHlwZSIsImdldE1hcmtUeXBlIiwiZXhpc3RzUm93cyIsImluc2VydFNxbCIsInN1Y2Nlc3MiLCJpbnNlcnRlZCIsImVyciIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhcnRzV2l0aCIsImZ1bGxMYWJlbCIsIm1hdGNoZXMiLCJtYXRjaCIsInBhcmFtcyIsImkiLCJyZXBsYWNlIiwicCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/upload-mark-scheme.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-mark-scheme&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fupload-mark-scheme.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();